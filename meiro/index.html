<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ゆかりんのおでかけ迷路</title>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;900&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=3">
</head>

<body>
    <div class="bg-animated"></div>
    <div class="bubbles" id="bubbles"></div>

    <div class="main-content">
        <header>
            <a href="../index.html" class="logo">
                <span class="material-icons-round">home</span>
                ゲームパークへ戻る
            </a>
            <h1>👩 ゆかりんのおでかけ迷路</h1>
        </header>

        <section id="menu-screen" class="screen active">
            <div class="menu-container">
                <h2>難易度をえらんでね！</h2>
                <button class="diff-btn btn-easy" onclick="startGame('easy')">
                    <span class="material-icons-round">sentiment_satisfied_alt</span>
                    初級 (5x5マス)
                </button>
                <button class="diff-btn btn-normal" onclick="startGame('normal')">
                    <span class="material-icons-round">sentiment_very_satisfied</span>
                    中級 (7x7マス)
                </button>
                <button class="diff-btn btn-hard" onclick="startGame('hard')">
                    <span class="material-icons-round">whatshot</span>
                    上級 (9x9マス)
                </button>
            </div>
            <div class="instructions">
                <h3>ルール</h3>
                <p>
                    「ゆいくん」がいるマス<strong>以外</strong>の<strong>すべてのマス</strong>を<wbr>1回ずつ通ってゴールにたどり着こう！<br>
                    スワイプや矢印キーで「ゆかりん」を動かしてね。<br>
                    迷ったときは右上の<span style="color: #f57c00; font-weight: bold;"><span class="material-icons-round"
                            style="font-size: 1rem; vertical-align: middle;">lightbulb</span> ヒント</span>ボタンで<wbr>正解ルートを確認できるよ。
                </p>
            </div>
        </section>

        <section id="game-screen" class="screen">
            <div class="game-header">
                <button class="action-btn" onclick="showMenu()">
                    <span class="material-icons-round">arrow_back</span> もどる
                </button>
                <span id="level-display" class="level-label">初級</span>
                <div style="display: flex; gap: 8px;">
                    <button class="action-btn restart-btn" onclick="restartLevel()">
                        <span class="material-icons-round">restart_alt</span> やり直す
                    </button>
                    <button class="action-btn hint-btn" onclick="showHint()" style="color: #f57c00;">
                        <span class="material-icons-round">lightbulb</span> ヒント
                    </button>
                </div>
            </div>

            <div id="game-board" class="game-board">
                <!-- Grid generated by JS -->
            </div>

            <div class="controls">
                <div class="dpad">
                    <button class="dbtn up" onclick="handleMove('up')"></button>
                    <button class="dbtn left" onclick="handleMove('left')"></button>
                    <button class="dbtn right" onclick="handleMove('right')"></button>
                    <button class="dbtn down" onclick="handleMove('down')"></button>
                </div>
            </div>
        </section>

        <!-- Overlay Dialog -->
        <div id="dialog-overlay" class="dialog-overlay">
            <div class="dialog">
                <h2 id="dialog-title">クリア！</h2>
                <div id="dialog-image">
                    <img src="../pakkun/characters/happy.png" alt="Happy">
                </div>
                <p id="dialog-msg">すべてのマスを通ってゴールできたね！</p>
                <button class="dialog-btn" onclick="nextLevel()">次のレベルへ</button>
                <button class="dialog-btn btn-outline" onclick="showMenu()">メニューにもどる</button>
            </div>
        </div>
    </div>

    <!-- Audio Effects -->
    <audio id="move-snd" src="https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3" preload="auto"></audio>
    <audio id="clear-snd" src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3"
        preload="auto"></audio>
    <audio id="fail-snd" src="https://assets.mixkit.co/active_storage/sfx/131/131-preview.mp3" preload="auto"></audio>

    <script src="script.js?v=3"></script>
</body>

</html>